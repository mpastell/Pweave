language: python

python:
  - "3.5"
  - "3.6"
  - "3.7"
env:
  - PYTHON_FLAVOR=standard
  - PYTHON_FLAVOR=conda

before_install:
  - if [[ $PYTHON_FLAVOR == "conda" ]];
    then
      source .conda_ci_before_install.sh;
     else
       pip install --upgrade pip && pip install python-coveralls;
     fi

install:
  - if [[ $PYTHON_FLAVOR == "conda" ]];
    then
        source .conda_ci_install.sh;
    else
        pip install .[test];
    fi

notifications:
  email: false

# Run test
script:
  - nosetests --with-coverage --cover-package=pweave

# Calculate coverage
after_success:
   - coveralls
